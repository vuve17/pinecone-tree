generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Node {
  id             Int     @id @default(autoincrement())
  title          String  @db.VarChar(20)
  parentNodeId   Int?    @map("parent_node_id")
  ordering       Int
  depth          Int

  // Relations
  parent         Node?   @relation("TreeHierarchy", fields: [parentNodeId], references: [id], onDelete: Cascade)
  children       Node[]  @relation("TreeHierarchy")

  @@map("node")
  @@index([parentNodeId, ordering], name: "idx_parent_node_id")
}